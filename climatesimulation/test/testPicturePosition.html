
<!DOCTYPE html>
<html>
<head>
<title>cannon.js - callbacks demo</title>
<meta charset="utf-8">

<meta name="viewport"
	content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<script src="assets/cannon.js"></script>
<script src="assets/cannon.demo.js"></script>
<script src="assets/dat.gui.js"></script>
<script src="assets/Three.js"></script>
<script src="assets/TrackballControls.js"></script>
<script src="assets/Detector.js"></script>
<script src="assets/Stats.js"></script>
<script src="assets/smoothie.js"></script>


<!-- <script src="intermediate.js"></script> -->

</head>
<body>




	<script>
function runEarth(intermediate,colorsA,imageWidth){    
    pData = []
    radius = 2
	for(c = 0; c < intermediate.length; c++){
        var b = intermediate[c][0];
        var a = intermediate[c][1];
        
        
		x = Math.cos(a) * Math.cos(b) * radius;
		y = Math.cos(a) * Math.sin(b) * radius;
		z = Math.sin(a) * radius;
		
		if( c % imageWidth == 0){
			pData.push([])
		}
		pData[pData.length-1].push([x,y,z,b])
	}  

	var demo = new CANNON.Demo();

demo.addScene("Moon", function() {
	world = demo.getWorld();
	// world.broadphase = new CANNON.SAPBroadphase();
	world.solver.iterations = 1;
	world.allowSleep = true;
	// world.allowSleep = false;


    
	pCount = 0;
	pInnerCount = 0;
	interval = setInterval(function() {
		for(a = 0; a < 2; a++){
		
			if(pCount >= pData.length){
				clearInterval(interval)
				return;									
			}
			
			var cD = pData[pCount][pInnerCount];
			var pShape = new CANNON.Sphere(0.1);
			var p = new CANNON.Body({
				mass : 5
			});
			p.addShape(pShape);
		
			p.position.set(cD[0], cD[1], cD[2]);
			var colors = colorsA[pCount*imageWidth+pInnerCount]
			colorD = 0x010000 * colors[0]+0x000100 * colors[1]+0x000001 * colors[2]
			p.linearDamping = 0.0;
			world.add(p);
			demo.addVisual(p, new THREE.MeshLambertMaterial({
				color : colorD
			}));
			console.log(cD[0]+" "+ cD[1]+" "+ cD[2])
			
			pInnerCount++;
			if(pData[pCount].length <= pInnerCount){
				pInnerCount = 0;
				pCount++;
			}
		}
	}, 1000);

	freqCount = 1
	var intervFreq= setInterval(function() {
	demo.settings.stepFrequency = freqCount * 6000
	freqCount++;
	if(freqCount > 5000){
		clearInterval(intervFreq);
	}
}, 0)

});

demo.start();
}	
	
	
	
	

  
    	//
    	
		//group by Y axis
		//make sun rotate around x axis (if it doesn't)
		//show Y axis correlation


    </script>
	<canvas id="earthCanvas"></canvas>
	<script src="loadingImage.js"></script>
</body>
</html>
